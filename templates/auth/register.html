{% extends "layout/base.html" %}

{% block content %}

<section class="card w-4/5 md:w-fit bg-base-200 shadow-xl mx-auto mb-2 md:mb-8">
    <div class="card-body pb-2">
        <h1 class="card-title border-b border-b-slate-600 pb-[4px]">
            Register User
        </h1>
        <form class="rounded-xl drop-shadow-xl flex flex-col gap-4 w-[97%] md:w-96 p-1 md:p-8">
            <label class="flex flex-col justify-start gap-2">
                Email:
                <input class="input input-bordered input-primary bg-slate-800" type="email" name="email" required {% if
                    from_protected %} disabled value="disabled" {% endif %} autofocus />
            </label>
            <label class="flex flex-col justify-start gap-2 relative">
                Password:
                <input class="input input-bordered input-primary bg-slate-800" type="password" name="password" required
                    {% if from_protected %} disabled value="disabled" {% endif %} minlength="6" />
                <button title="View password" type="button" class="absolute top-12 right-3"
                    _="on click if [type of previous <input/>] == 'password' then remove [@type=password] from previous <input/> then hide #eye then remove .hidden from #eye-slash else show #eye then add .hidden to #eye-slash then tell previous <input/> toggle [@type=password] end">
                    <img id="eye" src="/assets/img/eye.svg" alt="eye icon">
                    <img id="eye-slash" class="hidden" src="/assets/img/eye_slash.svg" alt="eye slash icon">
                </button>
            </label>
            <label class="flex flex-col justify-start gap-2">
                Username:
                <input class="input input-bordered input-primary bg-slate-800" type="text" name="username" required {%
                    if from_protected %} disabled value="disabled" {% endif %} minlength="4" maxlength="64" />
            </label>
            <footer class="card-actions justify-end">
                <button type="submit" hx-post="/register" hx-push-url="true" hx-indicator="#spinner" hx-target="body"
                    hx-swap="transition:true" {% if from_protected %} disabled {% endif %}
                    class="text-xs md:text-base badge badge-primary px-6 py-4 hover:scale-[1.1]">
                    Register User
                    <span id="spinner"
                        class="my-indicator ml-3 loading loading-spinner loading-xs text-fuchsia-700"></span>
                </button>
            </footer>
        </form>
    </div>
</section>

{% endblock content %}